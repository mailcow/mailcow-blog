<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>🛑📜 Spamhaus DNS Blocklist changes since 2023-07 - mailcow: dockerized - Blog</title><meta name=author content="Moohoo"><meta name=author-link content="servercow.de"><meta name=description content="Moohoo everyone!
With the mailcow update 2023-07, there&rsquo;s a somewhat significant change regarding Spamhaus DNS blocklists.
This blog post is here to provide information for those interested."><meta name=keywords content="2023,info"><meta itemprop=name content="🛑📜 Spamhaus DNS Blocklist changes since 2023-07"><meta itemprop=description content="Moohoo everyone!
With the mailcow update 2023-07, there&rsquo;s a somewhat significant change regarding Spamhaus DNS blocklists.
This blog post is here to provide information for those interested."><meta itemprop=datePublished content="2023-07-28T16:00:10+02:00"><meta itemprop=dateModified content="2023-07-28T20:42:27+02:00"><meta itemprop=wordCount content="683"><meta itemprop=image content="https://mailcow.email/images/cow_mailcow.svg"><meta itemprop=keywords content="2023,info,"><meta property="og:title" content="🛑📜 Spamhaus DNS Blocklist changes since 2023-07"><meta property="og:description" content="Moohoo everyone!
With the mailcow update 2023-07, there&rsquo;s a somewhat significant change regarding Spamhaus DNS blocklists.
This blog post is here to provide information for those interested."><meta property="og:type" content="article"><meta property="og:url" content="https://mailcow.email/posts/2023/spamhaus-dnsblocklist/"><meta property="og:image" content="https://mailcow.email/images/cow_mailcow.svg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-07-28T16:00:10+02:00"><meta property="article:modified_time" content="2023-07-28T20:42:27+02:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://mailcow.email/images/cow_mailcow.svg"><meta name=twitter:title content="🛑📜 Spamhaus DNS Blocklist changes since 2023-07"><meta name=twitter:description content="Moohoo everyone!
With the mailcow update 2023-07, there&rsquo;s a somewhat significant change regarding Spamhaus DNS blocklists.
This blog post is here to provide information for those interested."><meta name=application-name content="FixIt"><meta name=apple-mobile-web-app-title content="FixIt"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=https://mailcow.email/posts/2023/spamhaus-dnsblocklist/><link rel=prev href=https://mailcow.email/posts/2023/release-2023-07/><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"🛑📜 Spamhaus DNS Blocklist changes since 2023-07","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/mailcow.email\/posts\/2023\/spamhaus-dnsblocklist\/"},"genre":"posts","keywords":"2023, info","wordcount":683,"url":"https:\/\/mailcow.email\/posts\/2023\/spamhaus-dnsblocklist\/","datePublished":"2023-07-28T16:00:10+02:00","dateModified":"2023-07-28T20:42:27+02:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Niklas Meyer/DerLinkman"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=fixed><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="mailcow: dockerized - Blog"><img class="lazyload logo" src=/svg/loading.min.svg data-src=/images/cow_mailcow.svg data-srcset="/images/cow_mailcow.svg, /images/cow_mailcow.svg 1.5x, /images/cow_mailcow.svg 2x" data-sizes=auto alt="mailcow: dockerized - Blog" title="mailcow: dockerized - Blog"><span class=header-title-text>mailcow: dockerized - Blog</span><span class=header-title-post>📰</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/posts/>Posts</a></li><li class=menu-item><a class=menu-link href=/tags/>Tags</a></li><li class=menu-item><a class=menu-link href=/categories/>Categories</a></li><li class=menu-item><a class=menu-link href=https://mailcow.github.io/mailcow-dockerized-docs/ rel="noopener noreferrer" target=_blank><i class='fa fa-book'></i> Docs</a></li><li class=menu-item><a class=menu-link href=https://www.eth-services.de/ssd-vps/ rel="noopener noreferrer" target=_blank><i class='fa fa-server'></i> VPS</a></li><li class=menu-item><a class=menu-link href="https://www.servercow.de/mailcow?lang=en#support" title="Buy Support" rel="noopener noreferrer" target=_blank><i class='fas fa-band-aid'></i> Support</a></li><li class=menu-item><a class=menu-link href=https://github.com/mailcow/mailcow-dockerized title=GitHub rel="noopener noreferrer" target=_blank><i class='fab fa-github fa-fw'></i> GitHub</a></li><li class="menu-item has-children"><a class=menu-link href=https://demo.mailcow.email title=Demos rel="noopener noreferrer" target=_blank><i class='fa fa-play'></i> Demos</a><i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i><ul class=sub-menu><li class=menu-item><a class=menu-link href=https://demo.mailcow.email title="Stable Demo" rel="noopener noreferrer" target=_blank>Stable Demo</a></li><li class=menu-item><a class=menu-link href=https://nightly-demo.mailcow.email title="Nightly Demo" rel="noopener noreferrer" target=_blank>Nightly Demo</a></li></ul></li><li class="menu-item delimiter"></li><li class="menu-item language"><span role=button aria-label="Select Language" title="Select Language">English<i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i></span><ul class=sub-menu><li class=menu-item><a href=/de/posts/2023/spamhaus-dnsblocklist/ class=menu-link title=Deutsch>Deutsch</a></li></ul></li><li class="menu-item theme-switch" title="Switch Theme"><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="mailcow: dockerized - Blog"><img class="lazyload logo" src=/svg/loading.min.svg data-src=/images/cow_mailcow.svg data-srcset="/images/cow_mailcow.svg, /images/cow_mailcow.svg 1.5x, /images/cow_mailcow.svg 2x" data-sizes=auto alt=/images/cow_mailcow.svg title=/images/cow_mailcow.svg><span class=header-title-text>mailcow: dockerized - Blog</span><span class=header-title-post>📰</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=menu-item><a class=menu-link href=/posts/>Posts</a></li><li class=menu-item><a class=menu-link href=/tags/>Tags</a></li><li class=menu-item><a class=menu-link href=/categories/>Categories</a></li><li class=menu-item><a class=menu-link href=https://mailcow.github.io/mailcow-dockerized-docs/ rel="noopener noreferrer" target=_blank><i class='fa fa-book'></i> Docs</a></li><li class=menu-item><a class=menu-link href=https://www.eth-services.de/ssd-vps/ rel="noopener noreferrer" target=_blank><i class='fa fa-server'></i> VPS</a></li><li class=menu-item><a class=menu-link href="https://www.servercow.de/mailcow?lang=en#support" title="Buy Support" rel="noopener noreferrer" target=_blank><i class='fas fa-band-aid'></i> Support</a></li><li class=menu-item><a class=menu-link href=https://github.com/mailcow/mailcow-dockerized title=GitHub rel="noopener noreferrer" target=_blank><i class='fab fa-github fa-fw'></i> GitHub</a></li><li class=menu-item><span class=nested-item><a class=menu-link href=https://demo.mailcow.email title=Demos rel="noopener noreferrer" target=_blank><i class='fa fa-play'></i> Demos</a>
<i class="dropdown-icon fa-solid fa-chevron-right" aria-hidden=true></i></span><ul class=sub-menu><li class=menu-item><a class=menu-link href=https://demo.mailcow.email title="Stable Demo" rel="noopener noreferrer" target=_blank>Stable Demo</a></li><li class=menu-item><a class=menu-link href=https://nightly-demo.mailcow.email title="Nightly Demo" rel="noopener noreferrer" target=_blank>Nightly Demo</a></li></ul></li><li class="menu-item theme-switch" title="Switch Theme"><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li><li class="menu-item language"><span role=button aria-label="Select Language" title="Select Language">English<i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i></span>
<select class=language-select onchange="location=this.value"><option value=/posts/2023/spamhaus-dnsblocklist/ selected disabled>English</option><option value=/de/posts/2023/spamhaus-dnsblocklist/>Deutsch</option></select></li></ul></nav></div></header><main class=container data-page-style=normal><aside class=toc id=toc-auto><h2 class=toc-title>Contents&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>🛑📜 Spamhaus DNS Blocklist changes since 2023-07</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://github.com/DerLinkman title=Author target=_blank rel="external nofollow noopener noreferrer author" class=author><i class="fa-solid fa-user-circle" aria-hidden=true></i>
Niklas Meyer/DerLinkman</a></span>
<span class=post-category>included in <a href=/categories/information/><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> Information</a>&ensp;<a href=/categories/status/><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> Status</a></span></div><div class=post-meta-line><span title="2023-07-28 16:00:10"><i class="fa-regular fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=07-28-2023>07-28-2023</time></span>&nbsp;<span><i class="fa-solid fa-pencil-alt fa-fw" aria-hidden=true></i> 683 words</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw" aria-hidden=true></i> 4 minutes</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#what-are-spamhaus-dns-blocklists>What are Spamhaus DNS blocklists?</a></li><li><a href=#whats-changing>What&rsquo;s changing?</a></li><li><a href=#why-is-this-change-happening-and-am-i-affected>Why is this change happening, and am I affected?</a></li><li><a href=#what-if-i-dont-want-to-create-a-dqs-key-and-an-associated-account-with-spamhaus>What if I don&rsquo;t want to create a DQS key and an associated account with Spamhaus?</a></li></ul></li></ul></li></ul></nav></div></div><div class=content id=content><p><strong>Moohoo everyone!</strong></p><p>With the mailcow update 2023-07, there&rsquo;s a somewhat significant change regarding Spamhaus DNS blocklists.</p><p>This blog post is here to provide information for those interested.</p><h4 id=what-are-spamhaus-dns-blocklists>What are Spamhaus DNS blocklists?</h4><p>First of all, let&rsquo;s address the general question of what these lists actually are and what they are used for.</p><p>The Spamhaus DNS blocklists are (usually) freely accessible lists that can be integrated into various systems of an email server (whether it&rsquo;s Rspamd, Postfix, or others). In the case of mailcow, these blocklists are integrated into Postfix via Postscreen.</p><p>Essentially, they act as a &ldquo;prefilter&rdquo; for spammer addresses, but they work based on IP, not content, like Rspamd does.</p><p>These lists are updated in real-time and instruct the email server to deny connections from listed IPs.</p><p>Until now, these blocklists were available for use without any restrictions for all users.</p><p>However, that&rsquo;s unfortunately changing.</p><h4 id=whats-changing>What&rsquo;s changing?</h4><p>On <a href=https://twitter.com/spamhaus/status/1671141604705333248 target=_blank rel="external nofollow noopener noreferrer">June 20th</a>, Spamhaus blocked access to these lists from OVH, AWS, and Hetzner servers.</p><p>As a result, the DNS blocklists (only from Spamhaus, others still function) won&rsquo;t work unless users take action.</p><p>From now on, if you want to continue using the Spamhaus DNS blocklists, you&rsquo;ll need to create an account with them and generate a DQS (Domain Query Service) key, which you&rsquo;ll then add to mailcow.conf.</p><p>mailcow will take care of configuring the new DQS blocklists, which technically function the same way as the ones without an account.</p><p>We&rsquo;ve implemented a solution in the update and generate_config scripts that associates your public IP address with an Autonomous System (AS) and checks against a service we provide (asn-check.mailcow.email) to see if you&rsquo;re affected. If you are, mailcow will notify you.</p><h4 id=why-is-this-change-happening-and-am-i-affected>Why is this change happening, and am I affected?</h4><p>Spamhaus explains it as follows:</p><blockquote><p>The Spamhaus Project’s Terms of Use state that it doesn’t allow users to query via DNS resolvers where there is no attributable reverse DNS; this includes OVHCloud (we’ll explain why later in this article).</p></blockquote><blockquote><p>[&mldr;] The blocklists that the Spamhaus Project makes freely available via its Public Mirrors are for small-scale, non-commercial use. To ensure these users have a good quality of service, usage is monitored and measured against the Project’s Terms of Use. OVHCloud masks organizations’ queries to the Project’s Public Mirrors, so the team can’t attribute usage to individual entities. They have no way of establishing the number of queries a single organization is making. [&mldr;]</p></blockquote><blockquote><p>[&mldr;] To ensure its Terms of Use are adhered to, the Spamhaus Project will block queries from a specific IP address outside the policy. It also returns an error code. In the case of querying via an open/public resolver, i.e., OVHCloud, the error code is 127.255.255.254. [&mldr;]</p></blockquote><p>In other words, OVH/AWS/Hetzner&rsquo;s way of sending queries to Spamhaus violates the usage terms of Spamhaus&rsquo;s public DNS blocklists.</p><p><em>Currently, we can&rsquo;t say for sure whether other providers will be affected in the future. For now, we&rsquo;re aware of these three.</em></p><h4 id=what-if-i-dont-want-to-create-a-dqs-key-and-an-associated-account-with-spamhaus>What if I don&rsquo;t want to create a DQS key and an associated account with Spamhaus?</h4><p>If you choose not to create a Spamhaus account and, therefore, forgo DQS, you won&rsquo;t receive extra protection from Spamhaus&rsquo;s DNS blocklists if you&rsquo;re using one of the affected providers.</p><p>However, your mailcow will continue to function as before, and you&rsquo;ll still be able to send and receive emails normally!</p><p>This change only affects the inclusive spam protection that will no longer be in place. Rspamd will still be there and will continue to catch spam emails.</p><p>Are there any benefits to using DQS even if I&rsquo;m not affected?
Of course, all mailcow users (not just the affected ones) can access and use the new DQS blocklists.</p><p>It&rsquo;s best to read the official post from Spamhaus itself, which compares both lists. (Unfortunately, it&rsquo;s only available in English)</p><p><a href=https://www.spamhaus.com/resource-center/if-you-query-spamhaus-projects-dnsbls-via-ovhclouds-dns-move-to-the-free-data-query-service/ target=_blank rel="external nofollow noopener noreferrer">https://www.spamhaus.com/resource-center/if-you-query-spamhaus-projects-dnsbls-via-ovhclouds-dns-move-to-the-free-data-query-service/</a></p><p>This article summarizes the situation in general and explains how to obtain a DQS key.</p><p>I hope this brings some clarity to the situation and alleviates any fears that your mailcow server has been completely blocked or something similar.</p><p>Stay healthy and happy mailing!</p><p>Your mailcow Team
Niklas aka. DerLinkman</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="2023-07-28 20:42:27">Updated on 07-28-2023&nbsp;</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/2023/>2023</a>,&nbsp;<a href=/tags/info/>info</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/2023/release-2023-07/ class=prev rel=prev title="🍒 🐄 Mooly Update 2023 - Manageable CORS Settings and UI Improvements"><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>🍒 🐄 Mooly Update 2023 - Manageable CORS Settings and UI Improvements</a></div></div></article></main><footer class=footer><div class=footer-container><div class="footer-line custom"><a href=/imprint/>Imprint</a> | <a href=/policy/>Privacy Policy</div><div class="footer-line powered">Powered by <a href=https://gohugo.io/ target=_blank rel="external nofollow noopener noreferrer" title="Hugo 0.115.4">Hugo</a> | Theme - <a href=https://github.com/hugo-fixit/FixIt target=_blank rel=external title="FixIt v0.2.16"><img class=fixit-icon src=/fixit.min.svg alt="FixIt logo">&nbsp;FixIt</a></div><div class="footer-line copyright" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2016 - 2023</span><span class="license footer-divider"><a rel="license external nofollow noopener noreffer" href=https://tinc.gmbh?kontakt target=_blank>The Infrastructure Company GmbH</a></span></div><div class="footer-line statistics"></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label="Back to Top"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class="variant-numeric d-none">0%</span></div></div><div id=mask></div><noscript><div class=noscript-warning>Theme FixIt works best with JavaScript enabled.</div></noscript></div><link rel=stylesheet href=/lib/katex/katex.min.css><script src=/lib/lazysizes/lazysizes.min.js async defer></script><script src=/lib/katex/katex.min.js defer></script><script src=/lib/katex/auto-render.min.js defer></script><script src=/lib/katex/copy-tex.min.js defer></script><script src=/lib/katex/mhchem.min.js defer></script><script>window.config={code:{copyTitle:"Copy to clipboard",editLockTitle:"Lock editable code block",editUnLockTitle:"Unlock editable code block",editable:!0,maxShownLines:10},comment:{enable:!1},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1}}</script><script src=/js/theme.min.js defer></script></body></html>