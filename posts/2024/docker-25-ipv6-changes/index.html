<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>⚠️ Important change when using mailcow with deactivated IPv6 connectivity ⚠️ - mailcow: dockerized - Blog</title><meta name=author content>
<meta name=author-link content><meta name=description content="Moohoo everyone!
In this blog post, we would like to take a look at the major changes in relation to Docker and IPv6 usability for mailcow."><meta name=keywords content='2024,info,docker,25.X,ipv6,changes'><meta itemprop=name content="⚠️ Important change when using mailcow with deactivated IPv6 connectivity ⚠️"><meta itemprop=description content="Moohoo everyone!
In this blog post, we would like to take a look at the major changes in relation to Docker and IPv6 usability for mailcow."><meta itemprop=datePublished content="2024-02-01T11:19:02+02:00"><meta itemprop=dateModified content="2024-03-11T12:03:03+01:00"><meta itemprop=wordCount content="434"><meta itemprop=image content="https://mailcow.email/images/cow_mailcow.svg"><meta itemprop=keywords content="2024,info,docker,25.X,ipv6,changes,"><meta property="og:title" content="⚠️ Important change when using mailcow with deactivated IPv6 connectivity ⚠️"><meta property="og:description" content="Moohoo everyone!
In this blog post, we would like to take a look at the major changes in relation to Docker and IPv6 usability for mailcow."><meta property="og:type" content="article"><meta property="og:url" content="https://mailcow.email/posts/2024/docker-25-ipv6-changes/"><meta property="og:image" content="https://mailcow.email/images/cow_mailcow.svg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-02-01T11:19:02+02:00"><meta property="article:modified_time" content="2024-03-11T12:03:03+01:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://mailcow.email/images/cow_mailcow.svg"><meta name=twitter:title content="⚠️ Important change when using mailcow with deactivated IPv6 connectivity ⚠️"><meta name=twitter:description content="Moohoo everyone!
In this blog post, we would like to take a look at the major changes in relation to Docker and IPv6 usability for mailcow."><meta name=twitter:site content="@mailcow_email"><meta name=application-name content="FixIt"><meta name=apple-mobile-web-app-title content="FixIt"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=https://mailcow.email/posts/2024/docker-25-ipv6-changes/><link rel=prev href=https://mailcow.email/posts/2023/release-2023-12/><link rel=next href=https://mailcow.email/posts/2024/release-2024-01/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=/lib/fontawesome-free/all.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.css></noscript><link rel=preload href=/lib/animate/animate.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"⚠️ Important change when using mailcow with deactivated IPv6 connectivity ⚠️","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/mailcow.email\/posts\/2024\/docker-25-ipv6-changes\/"},"genre":"posts","keywords":"2024, info, docker, 25.X, ipv6, changes","wordcount":434,"url":"https:\/\/mailcow.email\/posts\/2024\/docker-25-ipv6-changes\/","datePublished":"2024-02-01T11:19:02+02:00","dateModified":"2024-03-11T12:03:03+01:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Niklas Meyer/DerLinkman"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=fixed><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper data-page-style=normal><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="mailcow: dockerized - Blog"><img loading=lazy src=/images/cow_mailcow.svg alt="mailcow: dockerized - Blog" data-title="mailcow: dockerized - Blog" class=logo style="background:url(/images/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title;for(const e of["style","data-title","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title;for(const e of["style","data-title","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>mailcow: dockerized - Blog</span><span class=header-title-post>📰</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/posts/>Posts</a></li><li class=menu-item><a class=menu-link href=/tags/>Tags</a></li><li class=menu-item><a class=menu-link href=/categories/>Categories</a></li><li class=menu-item><a class=menu-link href=https://mailcow.github.io/mailcow-dockerized-docs/ rel="noopener noreferrer" target=_blank><i class='fa fa-book'></i> Docs</a></li><li class="menu-item has-children"><a class=menu-link href=https://mailcow.email title=VPS rel="noopener noreferrer" target=_blank><i class='fa fa-server'></i> VPS</a><i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i><ul class=sub-menu><li class=menu-item><a class=menu-link href=https://eth-services.de title=ETH-Services rel="noopener noreferrer" target=_blank><i>🇩🇪</i> ETH-Services</a></li></ul></li><li class=menu-item><a class=menu-link href="https://www.servercow.de/mailcow?lang=en#support" title="Buy Support" rel="noopener noreferrer" target=_blank><i class='fas fa-band-aid'></i> Support</a></li><li class=menu-item><a class=menu-link href=https://github.com/mailcow/mailcow-dockerized title=GitHub rel="noopener noreferrer" target=_blank><i class='fab fa-github fa-fw'></i> GitHub</a></li><li class="menu-item has-children"><a class=menu-link href=https://demo.mailcow.email title=Demos rel="noopener noreferrer" target=_blank><i class='fa fa-play'></i> Demos</a><i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i><ul class=sub-menu><li class=menu-item><a class=menu-link href=https://demo.mailcow.email title="Stable Demo" rel="noopener noreferrer" target=_blank>✅ Stable Demo</a></li><li class=menu-item><a class=menu-link href=https://nightly-demo.mailcow.email title="Nightly Demo" rel="noopener noreferrer" target=_blank>🛠️ Nightly Demo</a></li></ul></li><li class="menu-item delimiter"></li><li class="menu-item theme-switch" title="Switch Theme"><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li><li class="menu-item language-switch"><span role=button aria-label="Select Language" title="Select Language"><i class="fa-solid fa-language fa-fw" aria-hidden=true></i></span><ul class=sub-menu><li class=menu-item><span class="menu-link text-secondary" title=English>English</span></li><li class=menu-item><a href=/de/posts/2024/docker-25-ipv6-changes/ class=menu-link title=Deutsch>Deutsch</a></li></ul></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="mailcow: dockerized - Blog"><img loading=lazy src=/images/cow_mailcow.svg alt=/images/cow_mailcow.svg data-title=/images/cow_mailcow.svg class=logo style="background:url(/images/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title;for(const e of["style","data-title","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title;for(const e of["style","data-title","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>mailcow: dockerized - Blog</span><span class=header-title-post>📰</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=menu-item><a class=menu-link href=/posts/>Posts</a></li><li class=menu-item><a class=menu-link href=/tags/>Tags</a></li><li class=menu-item><a class=menu-link href=/categories/>Categories</a></li><li class=menu-item><a class=menu-link href=https://mailcow.github.io/mailcow-dockerized-docs/ rel="noopener noreferrer" target=_blank><i class='fa fa-book'></i> Docs</a></li><li class=menu-item><span class=nested-item><a class=menu-link href=https://mailcow.email title=VPS rel="noopener noreferrer" target=_blank><i class='fa fa-server'></i> VPS</a>
<i class="dropdown-icon fa-solid fa-chevron-right" aria-hidden=true></i></span><ul class=sub-menu><li class=menu-item><a class=menu-link href=https://eth-services.de title=ETH-Services rel="noopener noreferrer" target=_blank><i>🇩🇪</i> ETH-Services</a></li></ul></li><li class=menu-item><a class=menu-link href="https://www.servercow.de/mailcow?lang=en#support" title="Buy Support" rel="noopener noreferrer" target=_blank><i class='fas fa-band-aid'></i> Support</a></li><li class=menu-item><a class=menu-link href=https://github.com/mailcow/mailcow-dockerized title=GitHub rel="noopener noreferrer" target=_blank><i class='fab fa-github fa-fw'></i> GitHub</a></li><li class=menu-item><span class=nested-item><a class=menu-link href=https://demo.mailcow.email title=Demos rel="noopener noreferrer" target=_blank><i class='fa fa-play'></i> Demos</a>
<i class="dropdown-icon fa-solid fa-chevron-right" aria-hidden=true></i></span><ul class=sub-menu><li class=menu-item><a class=menu-link href=https://demo.mailcow.email title="Stable Demo" rel="noopener noreferrer" target=_blank>✅ Stable Demo</a></li><li class=menu-item><a class=menu-link href=https://nightly-demo.mailcow.email title="Nightly Demo" rel="noopener noreferrer" target=_blank>🛠️ Nightly Demo</a></li></ul></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title="Switch Theme"><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span><span class="menu-system-item language-switch">
<span role=button aria-label="Select Language" title="Select Language">English<i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i></span>
<select class=language-select onchange="location=this.value"><option value=/posts/2024/docker-25-ipv6-changes/ selected disabled>English</option><option value=/de/posts/2024/docker-25-ipv6-changes/>Deutsch</option></select></span></li></ul></nav></div></header><main class=container><aside class="aside-collection animate__animated animate__fadeIn animate__faster" aria-label=Collections></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>⚠️ Important change when using mailcow with deactivated IPv6 connectivity ⚠️</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><span class=author><i class="fa-solid fa-user-circle" aria-hidden=true></i>
Niklas Meyer/DerLinkman</span></span><span class=post-included-in>&nbsp;included in <a href=/categories/status/ class=post-category title="Category - Status"><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> Status</a>&ensp;<a href=/categories/information/ class=post-category title="Category - Information"><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> Information</a></span></div><div class=post-meta-line><span title="published on 2024-02-01 11:19:02"><i class="fa-solid fa-calendar-days fa-fw me-1" aria-hidden=true></i><time datetime=02-01-2024>02-01-2024</time></span>&nbsp;<span title="Updated on 2024-03-11 12:03:03"><i class="fa-regular fa-calendar-check fa-fw me-1" aria-hidden=true></i><time datetime=03-11-2024>03-11-2024</time></span>&nbsp;<span title="434 words"><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden=true></i>About 500 words</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden=true></i>3 minutes</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><ul><li><a href=#who-is-affected>Who is affected?</a></li><li><a href=#what-is-the-problem>What is the problem?</a></li><li><a href=#what-can-i-do-against-it>What can i do against it?</a></li><li><a href=#what-does-mailcow-do-against-it>What does mailcow do against it?</a></li></ul></li></ul></nav></div></div><div class=content id=content><p><strong>Moohoo everyone!</strong></p><p>In this blog post, we would like to take a look at the major changes in relation to Docker and IPv6 usability for mailcow.</p><h3 id=who-is-affected class=heading-element><a href=#who-is-affected class=heading-mark></a>Who is affected?</h3><p>Basically, the problem affects all those who run their mailcow installation without IPv6 and are on versions of Docker >= 25, as this version has made serious changes to the Docker daemon, which will disrupt the usability of existing deactivated IPv6 mailcow installations.</p><h3 id=what-is-the-problem class=heading-element><a href=#what-is-the-problem class=heading-mark></a>What is the problem?</h3><p>With Docker version 25, the behavior of Docker in the area of address allocation for IPv6 addresses in a Docker network has changed. Previously (i.e. before 25.X), the parameter <code>enable_ipv6: false</code> in <code>docker-compose.yml</code> was sufficient to assign no IPv6 addresses to the network, although a subnet was defined in said file (by default in all mailcow installations). However, this option is no longer sufficient, as Docker now assigns a v6 from said subnet to each container due to the defined subnet in the network definition of <code>docker-compose.yml</code>. <strong>The problem</strong>: Due to <code>enable_ipv6: false</code> no addresses are routed in the Docker network, but since the containers all have an IPv6 address in the Docker network and IPv6 is preferred over IPv4 in priority, it now happens that the containers can no longer reach each other and thus a correct use of mailcow is restricted. Sieve filters in particular cause problems reaching the Postfix container.</p><h3 id=what-can-i-do-against-it class=heading-element><a href=#what-can-i-do-against-it class=heading-mark></a>What can i do against it?</h3><p>Well, fortunately there is a solution to this problem, even if it does not fit in with our motto of fiddling with the stack as little as possible. We have already updated our documentation and adapted the <a href=https://docs.mailcow.email/post_installation/firststeps-disable_ipv6/ target=_blank rel="external nofollow noopener noreferrer">entry for deactivating IPv6</a>. Follow this and your mailcow should work as before. <strong>Unfortunately, the end user (you) will still have to take action once to make this work, as mailcow does not do this automatically</strong>.</p><h3 id=what-does-mailcow-do-against-it class=heading-element><a href=#what-does-mailcow-do-against-it class=heading-mark></a>What does mailcow do against it?</h3><p>Since this behavior seems ambigous to us, why it comes to this behavior despite explicit deactivation of IPv6 use via <code>enable_ipv6: false</code>, we have opened an <a href=https://github.com/moby/moby/issues/47202 target=_blank rel="external nofollow noopener noreferrer">issue at Docker</a> itself on this topic. After all, why else would this option still exist if it is apparently ignored anyway by setting the IPv6 subnet?</p><p>It may be some time before there is a solid explanation or even a solution. That&rsquo;s why we wanted to inform you about this extensively and separately on several platforms.</p><hr><p>We hope that we have been able to shed some light on the subject and, if you are affected, put you on the right path.</p><p>Otherwise, the same applies as always:</p><p>Stay healthy and happy mailing 😉</p><p>Your mailcow team</p><p><em>DerLinkman/Niklas</em></p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="Updated on 2024-03-11 12:03:03">Updated on 03-11-2024&nbsp;</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/tags/2024/ class=post-tag title="Tags - 2024">2024</a><a href=/tags/info/ class=post-tag title="Tags - Info">Info</a><a href=/tags/docker/ class=post-tag title="Tags - Docker">Docker</a><a href=/tags/25.x/ class=post-tag title="Tags - 25.X">25.X</a><a href=/tags/ipv6/ class=post-tag title="Tags - Ipv6">Ipv6</a><a href=/tags/changes/ class=post-tag title="Tags - Changes">Changes</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/2023/release-2023-12/ class=post-nav-item rel=prev title="🛷 🐄 Moocember 2023 Update | Netfilter NFTables Support and Banlist Endpoint"><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>🛷 🐄 Moocember 2023 Update | Netfilter NFTables Support and Banlist Endpoint</a>
<a href=/posts/2024/release-2024-01/ class=post-nav-item rel=next title="🦾6️⃣4️⃣ 🐄 Janmooary 2024 Update | The Multiarch (x86 + ARM64) & Performance Update - Revision E">🦾6️⃣4️⃣ 🐄 Janmooary 2024 Update | The Multiarch (x86 + ARM64) & Performance Update - Revision E<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article><aside class=toc id=toc-auto aria-label=Contents><h2 class=toc-title>Contents&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside></main><footer class=footer><div class=footer-container><div class="footer-line custom"><a href=/imprint/>Imprint</a> | <a href=/policy/>Privacy Policy</div><div class="footer-line powered">Powered by <a href=https://gohugo.io/ target=_blank rel="external nofollow noopener noreferrer" title="Hugo 0.123.8"><img class=hugo-icon src=/images/hugo.min.svg alt="Hugo logo"> Hugo</a> | Theme - <a href=https://github.com/hugo-fixit/FixIt target=_blank rel=external title="FixIt v0.3.1"><img class=fixit-icon src=/images/fixit.min.svg alt="FixIt logo"> FixIt</a></div><div class="footer-line copyright" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2016 - 2024</span><span class="license footer-divider"><a rel="license external nofollow noopener noreffer" href=https://tinc.gmbh?kontakt target=_blank>The Infrastructure Company GmbH</a></span></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label="Back to Top"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class="variant-numeric d-none">0%</span></div></div><div id=mask></div><noscript><div class=noscript-warning>Theme FixIt works best with JavaScript enabled.</div></noscript></div><link rel=preload href=/lib/katex/katex.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/katex/katex.min.css></noscript><script src=/lib/katex/katex.min.js defer></script><script src=/lib/katex/auto-render.min.js defer></script><script src=/lib/katex/copy-tex.min.js defer></script><script src=/lib/katex/mhchem.min.js defer></script><script>window.config={code:{copyTitle:"Copy to clipboard",editLockTitle:"Lock editable code block",editUnLockTitle:"Unlock editable code block",editable:!0,maxShownLines:10},comment:{enable:!1},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1}}</script><script src=/js/theme.min.js defer></script></body></html>